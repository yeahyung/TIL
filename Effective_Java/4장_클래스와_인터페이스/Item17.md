## 변경 가능성을 최소화하라.

 - 불변 클래스: 인스턴스의 내부 값을 수정할 수 없는 클래스, 객체가 파괴되는 순간까지 달라지지 않는다.
 - 불변 클래스의 다섯 가지 규칙
   1. 객체의 상태를 변경하는 메서드(변경자)를 제공하지 않는다.
   2. 클래스를 확장할 수 없도록 한다.
      1. 하위 클래스에서 부주의하게 객체의 상태를 변경하는 것을 막아줌
   3. 모든 필드를 final로 선언한다.
   4. 모든 필드를 private으로 선언한다.
   5. 자신 외에는 내부의 가변 컴포넌트에 접근할 수 없도록 한다.

### 함수형 프로그래밍

```java
public final class Complex {
	private final double re;
	private final double im;
	
	public Complex(double re, double im) {
		this.re = re;
		this.im = im;
    }
	
	public Complex plus(Complex c) {
		return new Complex(re + c.re, im + c.im);
    }
}
```

 - 위의 `plus` 메서드들은 인스턴스 자신은 수정하지 않고 새로운 Complex 인스턴스를 만들어 반환한다.
   - 이처럼 피연산자에 함수를 적용해 결과를 반환하지만, 피연산자 자체는 그대로인 프로그래밍 패턴을 함수형 프로그래밍이라 한다.
   - 절차적 혹은 명령형 프로그래밍에서는 메서드에서 피연산자인 자신을 수정해 자신의 상태가 변하게 된다.

### 불변 객체

 - 불변 객체는 스레드 안전하여 동기화가 따로 필요없다 => 안심하고 공유할 수 있다.
   - 따라서 불변 클래스라면 한번 만든 인스턴스를 최대한 재활용하자(public 생성자 대신 정적 팩터리를 만들어두자)
     - Integer 클래스는 자주 사용되는 인스턴스를 캐싱하여 같은 인스턴스를 중복 생성하지 않게 한다.
 - 객체를 자유롭게 공유할 수 있기 대문에 방어적 복사도(clone) 필요하지 않다.
 - 값이 다르면 반드시 독립 객체로 만들어야 한다는 단점도 있음
   - 인스턴스를 불필요하게 생성하게 되는 원인이 되기도 함
   - 이를 해결하기 위해 가변 동반 클래스를 사용(String -> StringBuilder)